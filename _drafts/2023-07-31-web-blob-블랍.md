---
layout: post
date: 2023-07-31 12:15:12 +0900
title: '[WEB] Blob'
categories:
  - web
tags:
  - web-api
  - javascript
---

* Kramdown table of contents
{:toc .toc}

#### 참고한 문서

- [https://developer.mozilla.org/en-US/docs/Web/API/Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob)

#### 브라우저 호환

- 모든 브라우저에서 지원함


## 개요

`Blob`은 불변한 원시 데이터로 구성된 유사 파일 객체(a file-like object of immutable, raw data)를 나타낼 때 사용한다.

어쩌구 저쩌구


## 사용법

```
new Blob(array)
new Blob(array, options)
```

- `array`: `Blob` 내부에 배치될 값
- `options`: `Blob` 데이터의 MIME type 등을 설정하는 옵션. e.g. `{ type: 'application/json' }`

`FileReader`와 같이 사용하는 간단한 예시:

```js
function handleBlob(data) {
  var reader = new FileReader();
  reader.addEventListener('loadend', event => {
    console.log('actualData: ', event.target.result); // actualData:  { a: 1, b: 2 }
  });
  reader.readAsText(data); // 텍스트 파일 첨부 후 바로 읽으려면 이렇게
  // reader.readAsDataURL(data); // *data URI scheme
}

var data = new Blob(['{ a: 1, b: 2 }'], { type: 'application/json' });
handleBlob(data);
```

`handleBlob()`에서 읽은 값을 반환하게 하려면, 메서드 내부에 `Promise` 끼얹으면 된다:

```js
function handleBlob(data) {
  var reader = new FileReader();
  let p = new Promise((resolve) => {
    reader.addEventListener('loadend', event => {
      resolve(event.target.result);
    });
  });
  reader.readAsText(data);
  return p;
}

var data = new Blob(['{ c: 3, d: 4 }'], { type: 'application/json' });
var result = handleBlob(data);
result.then((actualData) => {
  console.log('actualData: ', actualData); // actualData:  { c: 3, d: 4 }
});
```

\* data URI scheme: `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...` 이런 값이 data URI scheme인데, Blob으로 data URI scheme 값을 만들 수 있지만, 둘이 같은 것은 아님


## 인스턴스 메서드

### text()

```js
var data = new Blob(['{ e: 5, f: 6 }'], { type: 'application/json' });
data.text().then(console.log); // { e: 5, f: 6 }
```

TODO 설명

### arrayBuffer()

### stream()

### slice()
