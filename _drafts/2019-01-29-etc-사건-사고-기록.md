---
layout: post
date: 2019-01-29 20:18:00 +0900
title: 'etc: 사건 사고 기록'
categories:
  - etc
tags:
  - history
---

* Kramdown table of contents
{:toc .toc}

## 오라클 DB 조회 속도 저하

- 일시: 2017-??-??
- 프로젝트: 이뿅너뿅 차세대

JDBC 커넥션을 통해 오라클 DB를 조회하는 속도가 엄청나게 느려서 이래저래 테스트해봤더니 결론은: JDBC 커넥션은 잘못이 없고, DB 자체의 이상으로 데이터를 FETCH 하는 속도가 느린게 원인.

FETCH가 느린거라서 DB 툴을 사용해 테스트하려면 SELECT가 아니라 CREATE TABLE AS로 확인해야 했다. (DB 툴에서 SELECT를 하면 일정 단위씩 끊어서 FETCH 하기 때문)

스프링 프레임웤 환경 말고 직접 커넥션을 만들어서 테스트해보기도 했었음.

## 이미지 자동 삭제 사건

- 일시: 2017-??-??
- 프로젝트: 이뿅너뿅 차세대

톰캣의 docBase 아래에 이미지 서버로 연결되는 심볼릭 링크를 생성, 이 후 톰캣의 autoDeploy 기능이 작동할 때마다 이미지들이 재귀적으로 삭제된 사건. 원인은 톰캣의 autoDeploy 때문이었음.

## DNS 캐시 사건

- 일시: 2018-10-??
- 프로젝트: 뿅뿅복권 수행사 이관

ASIS에서 사용하던 도메인에 A서버의 임시페이지를 연결해놓은 상태. 오픈 시점에 도메인의 연결을 B서버로 변경했으나 DNS 자체 캐시가 남아있어서 약 20시간 가량 사이트 접속 장애가 발생한 사건. PC에 따라 증상이 달랐는데 아무 문제 없는 PC도 있었지만 안되는 PC는 A서버의 임시페이지로 가거나, B서버로 연결되었으나 이미지나 스크립트 등이 제대로 불러와지지 않기도 함. 모바일도 마찬가지.

## 페이징 쿼리와 마이바티스 collection의 동시 사용

- 일시: 2019-01-30
- 프로젝트: 뿅쇼핑 차세대

마이바티스 collection으로 걸러낼 생각으로 이퀴 조인 결과물이 나오게 쿼리를 작성해놨다가, 이 쿼리에 페이징을 적용해버린 사건. 이러면 마이바티스가 뭔갈 하기도 전에 페이징 쿼리로 제한된 데이터가 나와버리니 의도한 것과는 전혀 딴판의 결과물이 나온다.

## 본사 갔다 왔더니 의자가 사라졌다.

- 일시: 2019-03-11
- 프로젝트: 뿅쇼핑 차세대

자리가 없다길래 본사에서 몇 달 있다 왔더니 내 의자가 사라진 사건. 어디 갔다 올 때는 의자도 반드시 찜해야 한다.

## HashMap으로는 마이바티스 컬렉션 기능이 제대로 작동하지 않음.

- 일시: 2019-03-11
- 프로젝트: 뿅쇼핑 차세대

테스트 삼아 HashMap으로 type 설정해서 해봤는데, 부모 하나 자식 하나 손자 하나 이런식으로 나온다. 마이바티스에 버그가 있다거나...
