---
layout: post
date: 2021-12-13 22:05:37 +0900
title: '[misc] AWS ë©”ëª¨'
categories:
  - misc
tags:
  - misc
  - aws
---

* Kramdown table of contents
{:toc .toc}

#### ì°¸ê³ í•œ ë¬¸ì„œ

- [AWS Documentation](https://docs.aws.amazon.com/)
- [AWS prescriptive Guidance](https://aws.amazon.com/ko/prescriptive-guidance/?nc1=h_ls&apg-all-cards.sort-by=item.additionalFields.sortText&apg-all-cards.sort-order=desc&awsf.apg-new-filter=*all&awsf.apg-content-type-filter=*all&awsf.apg-code-filter=*all&awsf.apg-category-filter=*all&awsf.apg-rtype-filter=*all&awsf.apg-isv-filter=*all&awsf.apg-product-filter=*all&awsf.apg-env-filter=*all)
- [AWS re:Post](https://www.repost.aws/)
- [AWS Support Center](https://console.aws.amazon.com/support)
- [AWS ì§€ì‹ ì„¼í„°](https://aws.amazon.com/ko/premiumsupport/knowledge-center/)

## ì„œë¹„ìŠ¤

### [IAM, Identity and Access Management](https://aws.amazon.com/ko/iam/)

![](/images/Arch_AWS-Identity-and-Access-Management_48.png)

ì¹´í…Œê³ ë¦¬: ë³´ì•ˆ, ìê²© ì¦ëª… ë° ê·œì • ì¤€ìˆ˜

ì‚¬ìš©ì ê´€ë¦¬ì™€ ë™ì‹œì— AWSì˜ ê° ì„œë¹„ìŠ¤ë“¤ì— í• ë‹¹í•  ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤.

AWSëŠ” ë£¨íŠ¸ ê¶Œí•œìœ¼ë¡œ ì§ì ‘ ì‘ì—…í•˜ì§€ ë§ê³  IAMì„ í†µí•´ ìƒˆ ì‚¬ìš©ìë¥¼ ì¶”ê°€í•œ ë’¤ ì‘ì—…í•  ê²ƒì„ ê¶Œì¥í•¨. ë°©í™”ë²½ê³¼ ê´€ë ¨ ìŒìŠ´.

### [EC2](https://aws.amazon.com/ko/ec2/)

![](/images/Arch_Amazon-EC2_48.png)

ì¹´í…Œê³ ë¦¬: ì»´í“¨íŒ…

TODO

#### AMI, Amazon Machine Images

EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ íŒŒì¼ë“¤ì„ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ. íŠ¹ì • ì‹œì ì˜ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•œ ë‹¤ìŒ ì´ ì´ë¯¸ì§€ë¡œ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

#### Auto Scaling ì˜¤í†  ìŠ¤ì¼€ì¼ë§

EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •í•´ì§„ ì„¤ì •ì— ë”°ë¼ ìë™ìœ¼ë¡œ ëŠ˜ë ¸ë‹¤ ì¤„ì˜€ë‹¤ í•´ì£¼ëŠ” ì„œë¹„ìŠ¤.

#### ì˜¤í†  ìŠ¤ì¼€ì¼ë§ ì ìš© ì‹œ ì£¼ì˜ ì‚¬í•­

AWS ì¸ìŠ¤í„´ìŠ¤ì˜ ê¸°ë³¸ ë³€ìˆ˜ê°€ ì•„ë‹Œ ê°’ì„ ì‹ë³„ìë¡œ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì„ êµ¬ì„±í•˜ë©´ ì•ˆë¨.

ë­” ì†Œë¦¬ëƒë©´, ì˜ˆë¥¼ ë“¤ì–´ ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ì— ì•„íŒŒì¹˜ í•˜ë‚˜, ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì— í†°ìº£ì´ ìˆë‹¤ê³  í–ˆì„ ë•Œ, í†°ìº£ ìª½ì— ì˜¤í†  ìŠ¤ì¼€ì¼ë§ì„ ì ìš©í•´ë²„ë¦¬ë©´ ì•„íŒŒì¹˜-í†°ìº£ í†µì‹ ì— í•„ìš”í•œ AJP í¬íŠ¸ë²ˆí˜¸ê°€ ì˜¤í†  ìŠ¤ì¼€ì¼ë§ìœ¼ë¡œ ëŠ˜ì–´ë‚œ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì¤‘ë³µë˜ë‹ˆ ì˜ëª»ëœ êµ¬ì„±ì´ë‹¤. (ì´ëŸ¬ë©´ ì˜¤í† ìŠ¤ì¼€ì¼ë§ ë•Œë§ˆë‹¤ ì¼ì¼ì´ ë³€ê²½í•´ì£¼ê±°ë‚˜ ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ í•´ê²°í•´ì•¼ í•œë‹¤)

ë”°ë¼ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ì— ì•„íŒŒì¹˜-í†°ìº£ì„ ì§ìœ¼ë¡œ(í•œ ì„œë²„ì— ë‘˜ ë‹¤ ë„£ëŠ”ë‹¤ëŠ” ë§) êµ¬ì„±í•˜ëŠ”ê²Œ ì˜¤í†  ìŠ¤ì¼€ì¼ë§ì„ ìœ„í•œ ì ì ˆí•œ êµ¬ì„±ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

#### ELB, Elastic Load Balancing

ë§ ê·¸ëŒ€ë¡œ ë¡œë“œ ë°¸ëŸ°ì‹± ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì„œë¹„ìŠ¤. EC2 ëŒ€ì‹œë³´ë“œì—ì„œë„ ì—°ê²°ë˜ëŠ”ë° 'ë¡œë“œ ë°¸ëŸ°ì‹±' í˜¹ì€ 'ë¡œë“œë°¸ëŸ°ì„œ'ë¡œ ì°¾ì„ ìˆ˜ ìˆìŒ.

### [ì½”ë“œ ë””í”Œë¡œì´ CodeDeploy](https://aws.amazon.com/ko/codedeploy/)

![](/images/Arch_AWS-CodeDeploy_48.png)

ì¹´í…Œê³ ë¦¬: ê°œë°œì ë„êµ¬

ì½”ë“œ ë°°í¬ ìë™í™” ì„œë¹„ìŠ¤. íŒ¨í‚¤ì§•ëœ ì½”ë“œ ì ì¬, ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë“±ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤. (ë¹Œë“œëŠ” CodeBuildë¼ê³  ë”°ë¡œ ìˆìŒ) S3ë‚˜ EC2ì— ì ‘ê·¼í•˜ê²Œ í•˜ë ¤ë©´ IAM í• ë‹¹ì´ í•„ìš”í•œ ëª¨ì–‘ì´ë‹¤.

ì½”ë“œ ë””í”Œë¡œì´ì˜ í–‰ë™ì€  [appspec.yml](https://docs.aws.amazon.com/codedeploy/latest/userguide/reference-appspec-file.html) íŒŒì¼ë¡œ ì •ì˜í•œë‹¤.

#### ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°°í¬ ê·¸ë£¹

ì „ë°˜ì ì¸ ë°°í¬ ë°©ë²•ê³¼ ëŒ€ìƒì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ë‹¨ìœ„. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë°°í¬ ê·¸ë£¹ì˜ ìƒìœ„ ê°œë…ìœ¼ë¡œ ë‹¨ìˆœíˆ ì¹´í…Œê³ ë¦¬ ì´ìƒì˜ ì—­í• ì€ ì—†ëŠ” ê±¸ë¡œ ë³´ì„.

#### ë°°í¬ êµ¬ì„±(í˜¹ì€ ë°°í¬ ì„¤ì •)

ì—¬ê¸°ì„œëŠ” ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–´ë–¤ ìˆœì„œì™€ ì‹œê°„ ê°„ê²©ì„ ë‘ê³  ë°°í¬í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤.

### [VPC, Virtual Private Cloud](https://aws.amazon.com/ko/vpc/)

![](/images/Arch_Amazon-Virtual-Private-Cloud_48.png)

ì¹´í…Œê³ ë¦¬: ë„¤íŠ¸ì›Œí‚¹ ë° ì½˜í…ì¸  ì „ì†¡

ê°€ìƒ ì‚¬ì„¤ í´ë¼ìš°ë“œ. ê³µìš© í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ë…¼ë¦¬ì ìœ¼ë¡œ ê²©ë¦¬ëœ ê°€ìƒì˜ ë„¤íŠ¸ì›¤ì„ ë§í•¨. ê°€ë ¹ EC2ë‚˜ S3 ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ì˜ VPCë¡œ ë¬¶ìœ¼ë©´ private IPë¡œ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë‹¤.

### [Route 53](https://aws.amazon.com/ko/route53/)

![](/images/Arch_Amazon-Route-53_48.png)

ì¹´í…Œê³ ë¦¬: ë„¤íŠ¸ì›Œí‚¹ ë° ì½˜í…ì¸  ì „ì†¡

~~ë¼ìš°í„°ì„ `Â¯\_(ãƒ„)_/Â¯`~~ ë„ë©”ì¸ ë“±ë¡, íŠ¸ë˜í”½ ë¼ìš°íŒ…, ì›¹ ì•± ìƒíƒœ í™•ì¸ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë‹¤.

### [ëŒë‹¤ Lambda](https://aws.amazon.com/ko/lambda/)

![](/images/Arch_AWS-Lambda_48.png)

ì¹´í…Œê³ ë¦¬: ì»´í“¨íŒ…

ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ AWSê°€ ì•Œì•„ì„œ ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ì–´ ì‹¤í–‰í•´ì£¼ëŠ” ì„œë¹„ìŠ¤. ì½”ë“œê°€ ì‹¤í–‰ëœ ì‹œê°„ë§Œí¼ ë¹„ìš©ì´ ì²­êµ¬ëœë‹¤. ì§€ì›ë˜ëŠ” ì–¸ì–´ëŠ” Node.js, Python, Ruby, Java, Go, .NET

ë‹¤ë“¤ ë§ì´ ì“´ë‹¤ë˜ë° ì•„ì§ ì˜ ëª²ê² ë‹¤... ğŸ¤”

### [S3](https://aws.amazon.com/ko/s3/)

![](/images/Arch_Amazon-Simple-Storage-Service_48.png)

ì¹´í…Œê³ ë¦¬: ìŠ¤í† ë¦¬ì§€

í´ë¼ìš°ë“œ ë°ì´í„° ì €ì¥ì†Œ. ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë²„í‚·, íŒŒì¼ì„ ê°ì²´ë¼ê³  ë¶€ë¥´ëŠ” ëª¨ì–‘.

ë—.

### [RDS](https://aws.amazon.com/ko/rds/)

![](/images/Arch_Amazon-RDS_48.png)

ì¹´í…Œê³ ë¦¬: ë°ì´í„°ë² ì´ìŠ¤

ë§ ê·¸ëŒ€ë¡œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤.

ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± ì‹œ Amazon Aurora ì—”ì§„ì˜ serverless ìœ í˜•ì„ ì„ íƒí•  ìˆ˜ ìˆëŠ”ë°, ì´ë ‡ê²Œ í•˜ë©´ "ì‚¬ìš©ìê°€ í•„ìš”í•œ ìµœì†Œ ë° ìµœëŒ€ ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì •í•˜ê³ , Auroraê°€ ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ì— ë”°ë¼ ìš©ëŸ‰ì„ ì¡°ì •"í•œë‹¤.

### [CloudWatch](https://aws.amazon.com/ko/cloudwatch/)

ì¹´í…Œê³ ë¦¬: ê´€ë¦¬ ë° ê±°ë²„ë„ŒìŠ¤

ëª¨ë“  AWS ì„œë¹„ìŠ¤ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë‚˜ ìƒíƒœ, ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤.

#### ë¡œê·¸ í™•ì¸í•˜ê¸°

í•˜ìœ„ë©”ë‰´ì¸ `ë¡œê·¸ > Logs Insights` ì—ì„œ ë¡œê·¸ ê·¸ë£¹ì„ ì„ íƒí•œ ë’¤ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤.

ê¸°ë³¸ ì¿¼ë¦¬ëŠ” ì´ëŸ° ëª¨ì–‘ì¸ë°:

```bash
fields @timestamp, @message
| sort @timestamp desc
| limit 20
```

ì•„ë˜ì²˜ëŸ¼ ë³¸ì¸ì´ ì›í•˜ëŠ”ëŒ€ë¡œ ì¿¼ë¦¬ ì‘ì„±í•˜ë©´ ë¨:

```bash
# íŠ¹ì • ë„ë©”ì¸ì— í•œí•´ í•„í„°ë§ + ì›í•˜ëŠ” í•„ë“œ ë¯¸ë¦¬ ë…¸ì¶œ
fields @timestamp, httpRequest.headers.15.value, @message
| filter (httpRequest.country='KR')
| filter (httpRequest.headers.0.value='fake.example.com')
| sort @timestamp desc
| limit 50
```

## ìš©ì–´

### private subnet

VPCë¡œ ë¬¶ì¸ ì„œë²„ë“¤ì˜ ê°€ìƒ ë‚´ë¶€ í†µì‹ ë§ì •ë„?

### [ARNs, Amazon Resource Names](https://docs.aws.amazon.com/ko_kr/general/latest/gr/aws-arns-and-namespaces.html)

```
arn:partition:service:region:account-id:resource-id
arn:partition:service:region:account-id:resource-type/resource-id
arn:partition:service:region:account-id:resource-type:resource-id
```

AWS ë¦¬ì†ŒìŠ¤ ê³ ìœ  ì‹ë³„ì. IAM, ëŒë‹¤, EC2, S3 ë“± AWS ì„œë¹„ìŠ¤ ë‚´ì—ì„œ ìƒì„±í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì •í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°’ì´ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ IAM ë¡¤ì€ ì´ë ‡ê²Œ ìƒê²¼ë‹¤:

```
arn:aws:iam::123456789012:role/codedeploy-service-role
```

## misc.

### AWSì™€ UFW

AWSì—ëŠ” ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •ì´ ë”°ë¡œ ìˆê³  ì—¬ê¸°ì„œ ì¸/ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ì„ ì„¤ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— UFW(ë¦¬ëˆ…ìŠ¤ì˜ ë°©í™”ë²½ ì‹œìŠ¤í…œ)ë¥¼ ë”°ë¡œ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
