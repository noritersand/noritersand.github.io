---
layout: post
date: 2021-12-17 14:55:05 +0900
title: '[Linux] 시스템 관련 기능 정리'
categories:
  - linux
tags:
  - linux
  - os
  - root
  - sudo
  - chmod
  - chown
  - umask
---

* Kramdown table of contents
{:toc .toc}

## sudo

명령을 루트(슈퍼유저) 권한으로 실행하는 키워드

```bash
sudo vi httpd.conf  # 루트권한으로 편집기 실행
```

가령 수정권한이 부족한 디렉터리를 삭제하려는 경우:

```bash
sudo rm remove-me -r
```

라고 치면 루트 비번 입력으로 임시 권한을 획득하여 삭제할 수 있게 된다.

아예 루트로 사용자를 전환하려면:

```bash
# 루트 사용자로 환경변수 등의 설정까지 모두 전환
sudo su -

# 이것로 루트 로그인인데 뭔 차이야...
su -  
```

## 쉘 스크립트 시작줄

```bash
#!/bin/sh
```

라고 하면 된다.

## 설정 파일 위치

### alias

일반적으로

- 유저 `/home/user/.bashrc`
- 루트 `/etc/rc.d/rc.local`

에 작성. 단, 위처럼 작성 할 경우 유저계정과 루트계정이 서로 독립적인 설정을 갖는다.

[지역에 관한 내용 링크](http://originalchoi.tistory.com/19)

### 사용자, 그룹

보통 사용자는 `/etc/passwd`, 그룹은 `/etc/group` 파일에 텍스트로 나열돼 있음.

## chmod

![](/images/chmod-chown-umask-image.png)

[이미지 출처](http://endlessgeek.com/2014/02/chmod-explained-linux-file-permissions)

```
chmod [-Rcfv] [--recursive] [--changes] [--silent] [--quiet] [--verbose] [--help] [--version] mode file
```

```bash
chmod 700 file  # 오너(owner, 파일을 만든 사람)에게만 모든 권한 부여
chmod 770 file  # 오너와 오너가 속한 그룹에 모든 권한 부여
chmod 777 file  # 오너와 오너의 그룹, 그 외 모든 유저에게 모든 권한 부여
```

## chown

```
chown [-Rcfv] [--recursive] [--changes] [--help] [--version] [--silent] [--quiet] [--verbose] [user][:.][group] file...

chown 소유권자:그룹식별자  바꾸고 싶은 파일 이름
```

```bash
chown tbs:tbs ./some-folder
```

## umask

TODO

## df

```bash
df -h # 현재 시스템 파티션별 하드디스크 용량을 %및 Byte로 표시
```

#### options

- `-h`: 크기를 KB, MB, GM 으로 자동 전환하여 표시
- `-i`: 용량 대신 inode 조회 (inode는 유닉스 파일시스템 내부에서 사용되는 파일의 식별번호다.)

## 메모리

```bash
cat /proc/meminfo | grep MemTotal
```

```bash
top -p 12345 # 12345 프로세스에 대한 CPU/메모리 점유율 확인
```

## 디스크

```bash
free
```

## audit 디스크 액세스 관리

- [https://linux.die.net/man/8/auditctl](https://linux.die.net/man/8/auditctl)
- [https://www.lesstif.com/pages/viewpage.action?pageId=20776444](https://www.lesstif.com/pages/viewpage.action?pageId=20776444)
- [http://amerika.tistory.com/entry/audit설정을-통합-리눅스-파일-보안강화](http://amerika.tistory.com/entry/audit%EC%84%A4%EC%A0%95%EC%9D%84-%ED%86%B5%ED%95%9C-%EB%A6%AC%EB%88%85%EC%8A%A4-%ED%8C%8C%EC%9D%BC-%EB%B3%B4%EC%95%88%EA%B0%95%ED%99%94)
- [https://techintguru.blogspot.kr/2017/04/audit.html](https://techintguru.blogspot.kr/2017/04/audit.html)

여러가지 할 수 있는걸로 보이는데, 일단 아는건 파일 시스템의 변화를 감지하고 로그를 남길 수 있음.

## apt-get

apt를 이용한 패키지 설치 명령어.

```bash
sudo apt-get install nodejs
```

검색해보니 `apt-get`은 설치 경로를 지정할 수 없다고 한다. [https://www.quora.com/How-do-I-choose-the-installation-path-for-apt-get](https://www.quora.com/How-do-I-choose-the-installation-path-for-apt-get)

만약 패키지를 찾을 수 없다는 메시지가 나오면 [apt 저장소를 업데이트](https://stackoverflow.com/questions/29929534/docker-error-unable-to-locate-package-git)를 해보자:

```bash
apt-get update
```

## whereis

설치된 패키지의 파일들이 어디어디 있는지 알려준다.

```bash
whereis nodejs
```
