---
layout: post
date: 2022-01-17 18:49:33 +0900
title: '[React] ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œ ê°œë°œ í™˜ê²½ êµ¬ì„±'
categories:
  - react
tags:
  - react
  - react-native
  - javascript
  - environment
  - settings
---

* Kramdown table of contents
{:toc .toc}

#### ì°¸ê³ í•œ ë¬¸ì„œ

- [\[React Native\] Introduction](https://reactnative.dev/docs/getting-started)
- [\[React Native\] APIs](https://reactnative.dev/docs/accessibilityinfo)
- [\[React Native\] Setting up the development environment](https://reactnative.dev/docs/environment-setup)

#### ë²„ì „ ì •ë³´

- 2022-01-24 ì‘ì„±
- Windows 11 (21H2)
- PowerShell 7.x
- NVM 1.1.9
- Node.js 17.4.0
- NPM/NPX 8.3.1
- React Native CLI 2.0.1

## ê°œìš”

ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œ ê°œë°œ í™˜ê²½ êµ¬ì„± ë°©ë²• ìš”ì•½ ì •ë¦¬. ê¸€ì“´ì´ëŠ” ë§¥ì„ ì•ˆì¨ì„œ iOSëŠ” í•´ë‹¹ ì—‡ã…‚ìŒ.

## ì„¤ì¹˜

ê°œë°œ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ Expo CLIê°€ ìˆê³  React Native CLIê°€ ìˆëŠ”ë°, Expo CLIëŠ” ì´ ê¸€ì—ì„œ ë”°ë¡œ ì–¸ê¸‰í•˜ì§€ ì•ŠìŒ.

### NVM, Node.js, NPM

NVMì€ ì—¬ëŸ¬ ë²„ì „ì˜ Node.jsë¥¼ ì„¤ì¹˜í•˜ê³  ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” íˆ´ì´ë‹¤.

```bash
# PowerShellì—ì„œ
choco install nvm
```

```bash
# ìµœì‹ ë²„ì „ìœ¼ë¡œ node ì„¤ì¹˜
nvm install node

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ node ì„¤ì¹˜
nvm install 10.15.1

# ì„¤ì¹˜ëœ node ë²„ì „ ëª©ë¡ê³¼ ìƒíƒœë¥¼ í‘œì‹œ
nvm ls

# node 10.15.1 ë²„ì „ í™œì„±í™”
nvm use 10.15.1

# node ë²„ì „ í™•ì¸
node --version
```

NPMì€ Node.jsì™€ í•¨ê»˜ ì„¤ì¹˜ëœë‹¤.

### ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤

- [Android Studio](https://developer.android.com/studio)
- [Android Studio: User guide](https://developer.android.com/studio/intro)

ì„¤ì¹˜í•˜ê³  `react-native init`ìœ¼ë¡œ ìƒì„±í•œ ê²½ë¡œ ì•„ë˜ì— `android` ë””ë ‰í„°ë¦¬ë¥¼ í”„ë¡œì íŠ¸ë¡œ ì—´ê¸°.

#### Gradle

Gradle ë¹Œë“œëŠ” JDKë„ í•„ìš”í•œë°, JDK ë²„ì „ì´ ìµœì‹ ì´ë©´ Gradleì˜ ë²„ì „ë„ ì˜¬ë ¤ì¤˜ì•¼ í•œë‹¤ê³  í•¨.

`{project root folder}\android\gradle\wrapper\gradle-wrapper.properties` íŒŒì¼ì—ì„œ `distributionUrl` í•­ëª©ì„ ìµœì‹  ë²„ì „ìœ¼ë¡œ ìˆ˜ì •í•œë‹¤. Gradleì˜ ë¦´ë¦¬ì¦ˆ ì •ë³´ëŠ” [ì—¬ê¸°](https://gradle.org/releases/)ì—ì„œ í™•ì¸.

ì˜ˆì‹œ:

```bash
distributionUrl=https\://services.gradle.org/distributions/gradle-7.3.3-all.zip
```

ê·¸ëƒ¥ ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ > Project Structure<kbd>ctrl + alt + shift + s</kbd>ì—ì„œ ë°”ê¿”ë„ ëœë‹¤.

#### SDK Platforms

ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ì—ì„œ Android SDK ì„¤ì •ìœ¼ë¡œ ì´ë™í•œë‹¤: Settings<kbd>ctrl + alt + s</kbd> > Appearance & Behavior > System Settings > Android SDK > SDK Platforms

ê·¸ë¦¬ê³  ì›í•˜ëŠ” ë²„ì „ ì•„ë¬´ê±°ë‚˜ ê³¨ë¼ì„œ ì„¤ì¹˜í•˜ë©´ ë˜ëŠ”ë°, ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œë¥¼ ë¹Œë“œí•˜ë ¤ë©´ Android 10 (Q)ëŠ” í•„ìˆ˜ë¼ê³  í•¨.

ìš°ì¸¡ í•˜ë‹¨ì˜ 'Show Package Details' ëˆŒëŸ¬ì„œ Android 10 (Q) ì•„ë˜ì— ìˆëŠ”:

- Android SDK Platform 29
- Intel x86 Atom_64 System Image í˜¹ì€ Google APIs Intel x86 Atom System Image

ìš”ë ‡ê²Œ ì„ íƒ í›„ (ì›í•˜ë©´ ì¶”ê°€ë¡œ ê³ ë¥´ê³ ) ì§„í–‰.

#### SDK Tools

ë‹¹ì¥ì€ ë”±íˆ ì†ëŒˆ ê²ƒì€ ì—†ê³ , ë‚˜ì¤‘ì— "Installed Build Tools revision x.x.x is corrupted. Remove and install again using the SDK Manager." ë¼ëŠ” ë©”ì‹œì§€ì™€ í•¨ê»˜ ë¹Œë“œê°€ ì•ˆë˜ë©´ í•´ë‹¹ ë²„ì „ì˜ ë¹Œë“œ íˆ´ì„ ì°¾ì•„ ì¬ì„¤ì¹˜í•˜ë©´ ëœë‹¤.

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

ê·¸ ë‹¤ìŒ ì„¤ì¹˜ëœ SDK ê²½ë¡œë¥¼ í™˜ê²½ ë³€ìˆ˜ `ANDROID_HOME`ìœ¼ë¡œ ì¶”ê°€í•¨. ê¸°ë³¸ê°’ì€ `%LOCALAPPDATA%\Android\Sdk`ë¼ê³  í•œë‹¤.

```bash
[Environment]::SetEnvironmentVariable("ANDROID_HOME", "$env:LOCALAPPDATA\Android\Sdk", "User")
```

PATHì— ìš”ê²ƒë„ ì¶”ê°€:

```bash
[Environment]::SetEnvironmentVariable("PATH", "$env:PATH;$env:LOCALAPPDATA\Android\Sdk\platform-tools", "User")
```

íŒŒì›Œì‰˜ ì¬ì‹œì‘ í›„ `adb` ëª…ë ¹ì–´ ì˜ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸.

### React Native CLI

```bash
npm install react-native-cli -g
npm install yarn -g # Yarnì´ ìˆìœ¼ë©´ init í•  ë•Œ ë¹ ë¦„

# ... ìƒëµ

#  Run instructions for Android:
#    â€¢ Have an Android emulator running (quickest way to get started), or a device connected.
#    â€¢ cd "/home/fixalot/repo/testbed-reactnative/tutorial" && npx react-native run-android
#
#  Run instructions for Windows:
#    â€¢ See https://aka.ms/ReactNativeGuideWindows for the latest up-to-date instructions.
```

```bash
# NEW_DIR ê²½ë¡œì— ìƒˆ ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œ ì•± êµ¬ì„±íŒŒì¼ ìƒì„±
react-native init NEW_DIR

# --version: íŠ¹ì • ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì˜ ë²„ì „ ì§€ì •
react-native init NEW_DIR --version X.XX.X

# --template: ë˜ìµíŠ¸ ë„¤ì´í‹°ë¸Œ í…œí”Œë¦¿ ì§€ì • ì˜µì…˜
react-native init NEW_DIR --template react-native-template-typescript
```

## ì•± ì‹œì‘í•˜ê¸°

### Metro

ì¼ë‹¨ ì•±ì„ ì‹œì‘í•˜ê¸° ì „ì— ë©”íŠ¸ë¡œë¥¼ ë„ì›Œë†”ì•¼ í•œë‹¤. (ë©”íŠ¸ë¡œëŠ” ì›¹íŒ©í•˜ê³  ë¹„ìŠ·í•œ ë²ˆë“¤ëŸ¬ë¼ê³  í•¨)

```bash
# npm start
react-native start
```

ì´ ê³¼ì •ì—ì„œ ë§Œì•½ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´:

```bash
Failed to construct transformer:  Error: error:0308010C:digital envelope routines::unsupported
    at new Hash (node:internal/crypto/hash:67:19)
    ... ìƒëµ
  opensslErrorStack: [ 'error:03000086:digital envelope routines::initialization error' ],
  ... ìƒëµ
```

[OpenSSL ê´€ë ¨ ë²„ì „ì´ ì•ˆë§ì•„ì„œ](https://stackoverflow.com/questions/69665222/node-js-17-0-1-gatsby-error-digital-envelope-routinesunsupported-err-os) ê·¸ëŸ°ê±´ë°, **Node.js ë²„ì „ì„ 16 ì´í•˜ë¡œ ë‚´ë¦¬ê±°ë‚˜** ì˜µì…˜ìœ¼ë¡œ `--openssl-legacy-provider`ë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•¨.

`package.json`ì„ ì´ë ‡ê²Œ ìˆ˜ì •:

```bash
"scripts": {
  "start": "SET NODE_OPTIONS=--openssl-legacy-provider && react-native start"
},
```

ì´í›„ ë©”íŠ¸ë¡œëŠ” í•­ìƒ NPM ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‹œì‘.

### ë””ë°”ì´ìŠ¤ ì„¤ì •

ì•±ì„ ì‹¤í–‰í•  ë””ë°”ì´ìŠ¤ë¥¼ ê²°ì •í•œë‹¤. ì‹¤ê¸°ê¸°ì¸ ê²½ìš° ê·¸ëƒ¥ ì¼€ì´ë¸”ë¡œ ì—°ê²°í•˜ê³  (ê°œë°œìëª¨ë“œë¡œ ë³€í™˜í•˜ê³ , ì—°ê²° í—ˆìš©ë„ í•˜ê³ ...) ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•˜ë©´ ëœë‹¤.

ë§Œì•½ ê°€ìƒ ë””ë°”ì´ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì•„ë˜ë¥¼ ë³¼ ê²ƒ.

### AVD Manager

AVD(Android Virtual Device)ëŠ” ì•ˆë“œë¡œì´ë“œë¥¼ ì—ë®¬ë ˆì´íŒ…í•  ë•Œ ì‚¬ìš©í•  OS ê¸°ê¸°ì˜ êµ¬ì„± ì •ë„ë¡œ ì´í•´í•˜ë©´ ëœë‹¤. ë²„íŠ¼ì˜ ìœ„ì¹˜ëŠ” ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ì˜ ë²„ì „ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. 2020.3.1 ë²„ì „ì€ ìš°ì¸¡ ìƒë‹¨ì— ìˆìŒ.

ì—­ì‹œ ì ë‹¹í•œ ê±¸ë¡œ ì•„ë¬´ê±°ë‚˜ ê³¨ë¼ì„œ ì¶”ê°€í•œë‹¤. ê·¸ë¦¬ê³  `Launch this AVD in the emulator` í´ë¦­(ì¬ìƒ ë²„íŠ¼).

### Gradle build

ì•ˆë“œë¡œì´ë“œëŠ” `react-native`ë¡œ ì•±ì„ ì‹¤í–‰í•˜ê¸° ì „ì— Gradle ë¹Œë“œë¥¼ í•œ ë²ˆ í•´ì¤˜ì•¼ í•œë‹¤. ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ì—ì„œ 'Sync Project with Gradle Files' í•´ì£¼ë©´ ë¨.

ë§Œì•½ ë¹Œë“œ ì¤‘ `build.gradle` íŒŒì¼ì—ì„œ:

```
import com.android.build.OutputFile
```

ì´ ë¶€ë¶„ì´ ë¬¸ì œê°€ ìˆë‹¤ë©´ í•´ë‹¹ ë¼ì¸ë§Œ ì½”ë©˜íŠ¸ ì²˜ë¦¬í•˜ê³  'Sync Project with Gradle Files' í•œ ë²ˆ (ì´ ë•Œ ì—ëŸ¬ ë°œìƒí•˜ëŠ”ë° ë¬´ì‹œí•˜ê³ ), ì½”ë©˜íŠ¸ ë‹¤ì‹œ ì§€ìš°ê³  Sync ë‹¤ì‹œ í•˜ë©´ ì˜ ë  ìˆ˜ë„(?) ìˆìŒğŸ˜µâ€ğŸ’«

### ì•± ì‹¤í–‰

ë©”íŠ¸ë¡œë¥¼ ì‹¤í–‰ì¤‘ì¸ í„°ë¯¸ë„ì€ ê·¸ëŒ€ë¡œ ë‘”ë‹¤.

ì´ì œ ì•± ì‹¤í–‰ ë°©ë²•ì€ ë‘ ê°€ì§€ì¸ë°:

#### React Native CLIë¡œ ì•± ì‹¤í–‰

ìƒˆ í„°ë¯¸ë„ì„ ì—´ê³  ì•„ë˜ ì…ë ¥:

ğŸ‘ğŸ»ğŸ¤˜
```bash
# npm run android
react-native run-android
```

í•˜ë©´ ë²ˆë“¤ë§ í›„ ì—°ê²°ëœ ë””ë°”ì´ìŠ¤ì—ì„œ ì•±ì„ ì‹¤í–‰ í•œë‹¤. ë§Œì•½ ë©”íŠ¸ë¡œê°€ ì•ˆë– ìˆìœ¼ë©´ ìŠ¤ìŠ¤ë¡œ ë„ìš´ë‹¤.

#### ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ì—ì„œ Run 'app'

ë‹¨ì¶•í‚¤ëŠ” <kbd>shift + f10</kbd>

ì‹¤í–‰í•˜ë©´ "Unable to load script. Make sure you're either running Metro (run 'npx react-native start') or that your bundle 'index.android.bundle' is packaged correctly for release." ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê²€ìƒ‰í•´ë³´ë©´ ì—¬ëŸ¬ ì¡°ì¹˜ ë°©ë²•ì´ ë‚˜ì˜¤ëŠ”ë°, ë¬´ì‹œí•˜ê³  ê°œë°œì ë©”ë‰´(ë””ë°”ì´ìŠ¤ í”ë“¤ê¸°)ì˜ 'Change Bundle Location'ì—ì„œ PCì˜ `ë„¤íŠ¸ì›Œí¬_IP:8081`ë¥¼ ì…ë ¥í•˜ë©´ í•´ê²°ë˜ê¸´ í•¨. ë§Œì•½ ì´ë ‡ê²Œ í–ˆì„ ë•Œ ì‘ë‹µì´ ì—†ìœ¼ë©´ ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ì—ì„œ Run ë‹¤ì‹œ í•´ì£¼ë©´ ë¨.

## ë””ë²„ê¹…

ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì— ê¸°ë³¸ ë‚´ì¥ëœ ì›¹ ë²„ì „ ë””ë²„ê±°ì™€ ì•± ë²„ì „ ë””ë²„ê±°ê°€ ìˆë‹¤. ì¼ë‹¨ ì—°ê²°ë˜ë©´ ë§ˆì¹˜ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì“°ë“¯ì´ ì“¸ ìˆ˜ ìˆë‹¤. (ì½˜ì†”, ë…¸ë“œ íŠ¸ë¦¬, ì½”ë“œ ë¸Œë ˆì´í‚¹, ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë“±ë“±)

AVDì—ì„  ì˜ ë˜ëŠ”ë° ì‹¤ ê¸°ê¸°ë¡œ í…ŒìŠ¤íŠ¸ í–ˆì„ ë•ŒëŠ” ì—°ê²°ì´ ì•ˆë˜ê±°ë‚˜ ë¸Œë ˆì´í¬ê°€ ì œëŒ€ë¡œ ì•ˆê±¸ë¦¬ê±°ë‚˜ í•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŒ.

### ì›¹ ë²„ì „ ë””ë²„ê±° Chrome Developer Tools

ë””ë²„ê·¸ ëª¨ë“œ ìƒíƒœì—ì„œ í¬ë¡¬ìœ¼ë¡œ [http://localhost:8081/debugger-ui](http://localhost:8081/debugger-ui)ì— ì ‘ì†í•˜ë©´ ëœë‹¤.

ë””ë²„ê·¸ ëª¨ë“œëŠ” ë©”íŠ¸ë¡œì—ì„œ <kbd>d</kbd>ë¥¼ ëˆŒëŸ¬ developer menuë¥¼ ì—´ê³  'Debug' í˜¹ì€ 'Debug JS Remotely'ë¥¼ ì„ íƒí•´ í™œì„±í™”í•œë‹¤. ìš”ëŸ¬ë©´ ê¸°ë³¸ ë¸Œë¼ìš°ì €ì—ì„œ ìë™ìœ¼ë¡œ ë””ë²„ê±° í˜ì´ì§€ì— ì ‘ì†ë¨.

### React Native Debugger

[ë‹¤ìš´ë¡œë“œ í˜ì´ì§€](https://github.com/jhen0409/react-native-debugger/releases)

[í¬ë¡œë®´](https://www.chromium.org) ê¸°ë°˜ ë…ë¦½ ì•±ì´ë‹¤.

ì—°ê²° ë°©ë²•ì€:

1. ë””ë²„ê±° ì‹¤í–‰
2. ë©”íŠ¸ë¡œ ì‹¤í–‰
3. ì•± ì‹¤í–‰
4. ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”
5. ë—

ë©”íŠ¸ë¡œ&ì•±ì„ ë””ë²„ê±°ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰í–ˆìœ¼ë©´ <kbd>r</kbd>ì„ ëˆŒëŸ¬ ìƒˆë¡œê³ ì¹¨ í•´ì¤˜ì•¼ í•¨.

ê·¼ë° ë””ë²„ê±° ì‚¬ìš©ì„±ì´ ì¢€ ì…˜ì°®ë‹¤... ê²Œë‹¤ê°€ ë¦¬í”„ë ˆì‹œë„ ëŠë ¤ì§. (ìœˆë„ìš°ë§Œ ê·¸ëŸ°ê°€?)

### [react-native-reanimated](https://docs.swmansion.com/react-native-reanimated/)ë¥¼ ì“°ëŠ” ê²½ìš° ë¦¬ëª¨íŠ¸ ë””ë²„ê¹… ë¶ˆê°€ëŠ¥

2022-02-15 í™•ì¸:

> As the library uses JSI for synchronous native methods access, remote debugging is no longer possible. You can use Flipper for debugging your JS code, however connecting debugger to JS context which runs on the UI > thread is not currently supported.  
> [https://docs.swmansion.com/react-native-reanimated/docs/#library-overview](https://docs.swmansion.com/react-native-reanimated/docs/#library-overview)
